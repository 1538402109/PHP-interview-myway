## 1.关闭TCP连接
第一次分手：主机1（可以使客户端，也可以是服务器端），设置Sequence Number和Acknowledgment Number，向主机2发送一个FIN报文段；此时，主机1进入FIN_WAIT_1状态；这表示主机1没有数据要发送给主机2了；

第二次分手：主机2收到了主机1发送的FIN报文段，向主机1回一个ACK报文段，Acknowledgment Number为Sequence Number加1；主机1进入FIN_WAIT_2状态；主机2告诉主机1，我"同意"你的关闭请求；进去close_wait状态
第三次分手：主机2向主机1发送FIN报文段，请求关闭连接，同时主机2进入LAST_ACK状态；

第四次分手：主机1收到主机2发送的FIN报文段，向主机2发送ACK报文段，然后主机1进入TIME_WAIT状态；主机2收到主机1的ACK报文段以后，就关闭连接；此时，主机1等待2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，主机1也可以关闭连接了。就是CLOSED状态。

## 2.建立TCP连接
第一次握手：建立连接。客户端发送连接请求报文段，将SYN位置为1，Sequence Number为x；然后，客户端进入SYN_SEND状态，等待服务器的确认；

第二次握手：服务器收到SYN报文段。服务器收到客户端的SYN报文段，需要对这个SYN报文段进行确认，设置Acknowledgment Number为x+1(Sequence Number+1)；同时，自己还要发送SYN请求信息，将SYN位置为1，Sequence Number为y；服务器端将上述所有信息放到一个报文段（即SYN+ACK报文段）中，一并发送给客户端，此时服务器进入SYN_RECV状态；

第三次握手：客户端收到服务器的SYN+ACK报文段。然后将Acknowledgment Number设置为y+1，向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手。

## 3.HTTP会慢吗？
使用ssl通信会比较慢，因为涉及CPU和内存消耗，需要加密解密

并不是所有的通信都需要加密

有些公司会觉得购买证书不划算，会不采用https。


## 4.TCP 粘包如何解决？
TCP粘包是指发送方发送的若干包数据到接收方接收时粘成一包，从接收缓冲区看，后一包数据的头紧接着前一包数据的尾。

如何解决：

（1）发送方

对于发送方造成的粘包现象，我们可以通过关闭Nagle算法来解决，使用TCP_NODELAY选项来关闭Nagle算法。

（3）应用层处理

应用层的处理简单易行！并且不仅可以解决接收方造成的粘包问题，还能解决发送方造成的粘包问题。解决方法就是循环处理：应用程序在处理从缓存读来的分组时，读完一条数据时，就应该循环读下一条数据，直到所有的数据都被处理；但是如何判断每条数据的长度呢？两种途径：

1）格式化数据：每条数据有固定的格式（开始符、结束符），这种方法简单易行，但选择开始符和结束符的时候一定要注意每条数据的内部一定不能出现开始符或结束符；

2）发送长度：发送每条数据的时候，将数据的长度一并发送，比如可以选择每条数据的前4位是数据的长度，应用层处理时可以根据长度来判断每条数据的开始和结束。

## 5.堆栈
栈  是由操作系统来分配的。存放函数的参数，局部变量。其操作方式类似于数据结构中的栈。

堆，一般是由程序员分配，若程序员不分配，可能由OS收回。

## 6.RESTful 是什么

看url就知道要干什么。

看method就知道要干什么

看状态码就知道结果怎么样

## 7.HTTP 与 HTTPS 区别

HTTP 明文传输，数据都是未加密的，安全性较差，HTTPS（SSL+HTTP） 数据传输过程是加密的，安全性较好。

使用 HTTPS 协议需要到 CA（Certificate Authority，数字证书认证机构） 申请证书，一般免费证书较少，因而需要一定费用。证书颁发机构如：Symantec、Comodo、GoDaddy 和 GlobalSign 等。
HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换 3 个包，而 HTTPS除了 TCP 的三个包，还要加上 ssl 握手需要的 9 个包，所以一共是 12 个包。
http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。
HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议，所以，要比较 HTTPS 比 HTTP 要更耗费服务器资源。
## 8.TIME-WAIT 是什么，为什么必须等待 2MLS
TIME-WAIT 是一种 TCP 状态。等待 2MLS 可以保证客户端最后一个报文段能够到达服务器，如果未到达，服务器则会超时重传连接释放报文段，使得客户端、服务器都可以正常进入到 CLOSE(关闭) 状态
## 9.cookie、session的联系和区别，多台web服务器如何共享session？
cookie在客户端保存状态，session在服务器端保存状态。但是由于在服务器端保存状态的时候，在客户端也需要一个标识，所以session也可能要借助cookie来实现保存标识位的作用。

cookie包括名字，值，域，路径，过期时间。路径和域构成cookie的作用范围。cookie如果不设置过期时间，则这个cookie在浏览器进程 
存在时有效，关闭时销毁。如果设置了过期时间，则cookie存储在本地硬盘上，在各浏览器进程间可以共享。

session存储在服务器端，服务器用一种散列表类型的结构存储信息。当一个连接建立的时候，服务器首先搜索有没有存储的session id，如果没有，则建立一个新的session，将session id返回给客户端，客户端可以选择使用cookie来存储session id。也可以用其他的方法，比如服务器端将session id附在URL上。

区别：

(1).cookie在本地，session在服务器端。

(2).cookie不安全，容易被欺骗，session相对安全。

(3).session在服务器端，访问多了会影响服务器性能。

(4). cookie有大小限制，为3K。多服务器共享session可以尝试将session存储在memcache或者redis中。

## 10.cookie 的作用：
会话状态管理

个性化推荐

浏览器行为追踪。

domain决定了哪些主机可以使用cookie

path决定了哪些端口可以使用cookie。
## 11.http协议中的post和get有何区别？

GET用于获取信息，不应该用于修改信息，pOST可用于更新修改信息。

GET可传输数据大小和URL有关，而pOST没有限定大小，大小和服务器配置有关。

GET放在URL中，因此不安全，而pOST传输数据对于用户来说是不可见的，所以相对安全。

在ajax: post不被缓存，get被缓存所以一般在请求结尾加Math.random();

SERVER端接受:因为在submit提交的时候是按不同方式进行编码的，所以服务端在接受的时候会按照不同的方式进行接受!

编码方式:如果传递数据是非-ASCII,那么GET一般是不适应的，所以在传递的时候会做编码处理!
## 12.说一下熟悉的 http 状态码和其代表的意义
200 : 请求成功，请求的数据随之返回。

301 : 永久性重定向。

302 : 暂时行重定向。

401 : 当前请求需要用户验证。

403 : 服务器拒绝执行请求，即没有权限。

404 : 请求失败，请求的数据在服务器上未发现。

500 : 服务器错误。一般服务器端程序执行错误。

503 : 服务器临时维护或过载。这个状态时临时性的。
## 13. TCP和UDP
udp是非面向连接的，尽量保证数据交付，非按顺序到达。头部开销小，实现简单

tcp是面向连接的，能保证不丢失数据。流量控制，阻塞控制。提供可靠的数据服务。一对一。



